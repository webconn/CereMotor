menu "Robot modules"

    config USE_CHASSIS
        bool "Chassis library"
        default "y"

    config USE_ENCODERS
        bool "Encoders library"
        default "y"

    config USE_PID
        bool "PID stabilisation"
        default "y"

    config USE_COORDS
        bool "Coords computer"
        default "n"
        
endmenu

config UART_STDOUT
    int "Default stdout UART"
    default 1

choice
    prompt "Robot config set"
    
    config ROBOT_2013PROTO
    bool "Robot 2013 Prototype"

    config ROBOT_DEFAULT
    bool "Manual configuration"

endchoice

if ROBOT_DEFAULT

menu "Manual robot configuration"

    # Chassis configuration

    if USE_CHASSIS
    menu "Chassis configuration"

        config PWM_ACCURACY
            depends on ROBOT_DEFAULT
            int "PWM accuracy"
            default 8192

        comment "MCU core configuration"

        config CHASSIS_APB1
            depends on ROBOT_DEFAULT
            string "Chassis APB1 init"

        config CHASSIS_APB2
            depends on ROBOT_DEFAULT
            string "Chassis APB2 init"

        comment "Left engine"

        config DIR_LEFT_FWD_GPIO
            depends on ROBOT_DEFAULT
            string "Left FWD GPIO"

        config DIR_LEFT_FWD_PIN
            depends on ROBOT_DEFAULT
            int "Left FWD Pin"
            default 0

        config DIR_LEFT_BWD_GPIO
            depends on ROBOT_DEFAULT
            string "Left BWD GPIO"

        config DIR_LEFT_BWD_PIN
            depends on ROBOT_DEFAULT
            int "Left FWD Pin"
            default 0

        config PWM_LEFT_GPIO
            depends on ROBOT_DEFAULT
            string "Left PWM GPIO"

        config PWM_LEFT_PIN
            depends on ROBOT_DEFAULT
            int "Left PWM Pin"
            default 0

        config PWM_LEFT_TIMER
            depends on ROBOT_DEFAULT
            string "Left PWM Timer"

        config PWM_LEFT_OC
            depends on ROBOT_DEFAULT
            int "Left PWM Timer Output"
            default 0

        comment "Right engine"

        config DIR_RIGHT_FWD_GPIO
            depends on ROBOT_DEFAULT
            string "Right FWD GPIO"

        config DIR_RIGHT_FWD_PIN
            depends on ROBOT_DEFAULT
            int "Right FWD Pin"
            default 0

        config DIR_RIGHT_BWD_GPIO
            depends on ROBOT_DEFAULT
            string "Right BWD GPIO"

        config DIR_RIGHT_BWD_PIN
            depends on ROBOT_DEFAULT
            int "Right FWD Pin"
            default 0


        config PWM_RIGHT_GPIO
            depends on ROBOT_DEFAULT
            string "Right PWM GPIO"

        config PWM_RIGHT_PIN
            depends on ROBOT_DEFAULT
            int "Right PWM Pin"
            default 0

        config PWM_RIGHT_TIMER
            depends on ROBOT_DEFAULT
            string "Right PWM Timer"

        config PWM_RIGHT_OC
            depends on ROBOT_DEFAULT
            int "Right PWM Timer Output"
            default 0

    endmenu # Chassis config
    endif # Chassis config

    if USE_ENCODERS
    menu "Encoders configuration"
        
        comment "MCU core configuration"

        config ENC_APB1
            depends on ROBOT_DEFAULT
            string "Encoders APB1 init"

        config ENC_APB2
            depends on ROBOT_DEFAULT
            string "Encoders APB2 init"

        comment "Left encoder"

        config ENC_LEFT_A_GPIO
            depends on ROBOT_DEFAULT
            string "Left encoder A channel GPIO"

        config ENC_LEFT_A_PIN
            depends on ROBOT_DEFAULT
            int "Left encoder A channel Pin"
            default 0

        config ENC_LEFT_B_GPIO
            depends on ROBOT_DEFAULT
            string "Left encoder B channel GPIO"

        config ENC_LEFT_B_PIN
            depends on ROBOT_DEFAULT
            int "Left encoder B channel Pin"
            default 0

        config ENC_LEFT_TIMER
            depends on ROBOT_DEFAULT
            string "Left encoder Timer"

        config ENC_LEFT_INV
            depends on ROBOT_DEFAULT
            bool "Inverse polarity for Left encoder"

        config ENC_LEFT_SWAP
            depends on ROBOT_DEFAULT
            bool "Swap channels for Left encoder (change direction)"
            
        comment "Right encoder"

        config ENC_RIGHT_A_GPIO
            depends on ROBOT_DEFAULT
            string "Right encoder A channel GPIO"

        config ENC_RIGHT_A_PIN
            depends on ROBOT_DEFAULT
            int "Right encoder A channel Pin"
            default 0

        config ENC_RIGHT_B_GPIO
            depends on ROBOT_DEFAULT
            string "Right encoder B channel GPIO"

        config ENC_RIGHT_B_PIN
            depends on ROBOT_DEFAULT
            int "Right encoder B channel Pin"
            default 0

        config ENC_RIGHT_TIMER
            depends on ROBOT_DEFAULT
            string "Right encoder Timer"

        config ENC_RIGHT_INV
            depends on ROBOT_DEFAULT
            bool "Inverse ploarity for Right encoder"

        config ENC_RIGHT_SWAP
            depends on ROBOT_DEFAULT
            bool "Swap channels for Right encoder (change direction)"

        comment "Physical parameters"

        config ENC_WHEEL_RADIUS
            depends on ROBOT_DEFAULT
            int "Encoder wheel radius (in mm)"
            default 0

        config ENC_RESOLUTION
            depends on ROBOT_DEFAULT
            int "Encoder resolution (clicks per revolution)"
            default 0

    endmenu # Encoders config
    endif # Encoders config

    if USE_PID
    menu "Stabilisation configuration"

        config CHASSIS_RADIUS
            depends on ROBOT_DEFAULT
            int "Robot chassis radius (in mm)"
            default 0

    endmenu # Stabilisation config
    endif # Stabilisation config

endmenu # Manual robot configuration

endif
